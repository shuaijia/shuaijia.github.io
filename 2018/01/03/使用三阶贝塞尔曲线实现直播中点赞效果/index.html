<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Android机动车</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ǰ���������룬��鿴�ҵ�github��https://github.com/shuaijia/LiveLike��ϲ���Ļ��͸�������^_^ ��Ƶֱ����ش�Ҷ���ı������2015�����ҿ�ʼ����Ƶֱ����ʼ�����ռ��������ϵĴ�����APP�����϶���ֱ�����ܣ�����ר��ֱ���Ķ��㡢�����ȡ���Ҷ����ܿ���">
<meta property="og:type" content="article">
<meta property="og:title" content="Android机动车">
<meta property="og:url" content="http://shuaijia.github.io/2018/01/03/使用三阶贝塞尔曲线实现直播中点赞效果/index.html">
<meta property="og:site_name" content="Android机动车">
<meta property="og:description" content="ǰ���������룬��鿴�ҵ�github��https://github.com/shuaijia/LiveLike��ϲ���Ļ��͸�������^_^ ��Ƶֱ����ش�Ҷ���ı������2015�����ҿ�ʼ����Ƶֱ����ʼ�����ռ��������ϵĴ�����APP�����϶���ֱ�����ܣ�����ר��ֱ���Ķ��㡢�����ȡ���Ҷ����ܿ���">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://img.blog.csdn.net/20171013164532553?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20171013164837343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20171013165107682?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20171013171139379?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20171013172604979?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20171013174108549?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/1/2/160b4a67429c1092?w=344&h=344&f=jpeg&s=8753">
<meta property="og:updated_time" content="2018-01-03T06:36:18.215Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android机动车">
<meta name="twitter:description" content="ǰ���������룬��鿴�ҵ�github��https://github.com/shuaijia/LiveLike��ϲ���Ļ��͸�������^_^ ��Ƶֱ����ش�Ҷ���ı������2015�����ҿ�ʼ����Ƶֱ����ʼ�����ռ��������ϵĴ�����APP�����϶���ֱ�����ܣ�����ר��ֱ���Ķ��㡢�����ȡ���Ҷ����ܿ���">
<meta name="twitter:image" content="http://img.blog.csdn.net/20171013164532553?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
  
    <link rel="alternate" href="/atom.xml" title="Android机动车" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Android机动车</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">人之所以能，是相信能</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://shuaijia.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-使用三阶贝塞尔曲线实现直播中点赞效果" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/03/使用三阶贝塞尔曲线实现直播中点赞效果/" class="article-date">
  <time datetime="2018-01-03T06:36:10.485Z" itemprop="datePublished">2018-01-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="j��"><a href="#j��" class="headerlink" title="ǰ��"></a>ǰ��</h3><p>�������룬��鿴�ҵ�github��<a href="https://github.com/shuaijia/LiveLike" target="_blank" rel="noopener">https://github.com/shuaijia/LiveLike</a>��ϲ���Ļ��͸�������^_^</p>
<p>��Ƶֱ����ش�Ҷ���ı������2015�����ҿ�ʼ����Ƶֱ����ʼ�����ռ��������ϵĴ�����APP�����϶���ֱ�����ܣ�����ר��ֱ���Ķ��㡢�����ȡ���Ҷ����ܿ�������ֱ�����������ֱ������ô�Ծ��ʵ��������̲�ס���ޡ������</p>
<p>����Ϊ���������ǣ������Լ����ĽǶȿ������磬�������ŵĵ���Ч������ȻҲ�ⲻ���Լ�ʵ��һ���ӡ�</p>
<p>�ȿ�Ч����<br><img src="http://img.blog.csdn.net/20171013164532553?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����"></p>
<p>����Ч���ȷ���һ����</p>
<p><img src="http://img.blog.csdn.net/20171013164837343?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����"></p>
<p>����Ч����ȷ�����˼·�͹ؼ�������</p>
<p><img src="http://img.blog.csdn.net/20171013165107682?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����"></p>
<ul>
<li><strong>�Զ���View��Ȼ�ٲ��ˣ����ǻ���</strong></li>
<li><strong>���ְ���������֡�·��Ҳ����ͬ�����������Ҳ�Ǳ�Ҫ��</strong></li>
<li><strong>ÿ�����ĵ��˶��ٶȡ��仯�����ǲ�ͬ�ģ������õ��˲�ֵ��</strong></li>
<li><strong>���ĵ��˶��켣��ƽ�������ߣ��������߶���һ�������������뵽��ʹ�ñ���������</strong></li>
<li><strong>Ӧ�ñ��������������˶��е��λ�ã�����Ҫʹ�ù�ֵ����ʵ��ƽ���Ķ���Ч��</strong></li>
</ul>
<p><strong>��Щ����Ҫ��</strong></p>
<p>����ʵ��˼·����ô���������Ǹ��ݷ����������ص㣬һ��������ʵ�֣�</p>
<hr>
<h3 id="һ����������View�����ĳ����ڵײ�������"><a href="#һ����������View�����ĳ����ڵײ�������" class="headerlink" title="һ����������View�����ĳ����ڵײ�������"></a>һ����������View�����ĳ����ڵײ�������</h3><p>����ʹ��RelativeLayout��Ϊ���ʣ������Զ���View��̳�RelativeLayout��</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class FavorLayout extends RelativeLayout &#123;</span><br><span class="line"></span><br><span class="line">    private static final String TAG = &quot;FavorLayout&quot;;</span><br><span class="line"></span><br><span class="line">    // ʵ�����Ч��</span><br><span class="line">    private Random random = new Random();</span><br><span class="line"></span><br><span class="line">    // ���ĸ߶�</span><br><span class="line">    private int iHeight = 120;</span><br><span class="line">    // ���Ŀ��</span><br><span class="line">    private int iWidth = 120;</span><br><span class="line">    // FavorLayout�߶�</span><br><span class="line">    private int mHeight;</span><br><span class="line">    // FavorLayout���</span><br><span class="line">    private int mWidth;</span><br><span class="line"></span><br><span class="line">    // ��������view��λ��</span><br><span class="line">    private LayoutParams lp;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>��Ȼ�ˣ�����Ҳ�ٲ���</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public FavorLayout(Context context) &#123;</span><br><span class="line">	super(context);</span><br><span class="line">	init();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public FavorLayout(Context context, AttributeSet attrs) &#123;</span><br><span class="line">	super(context, attrs);</span><br><span class="line">	init();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public FavorLayout(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">	super(context, attrs, defStyleAttr);</span><br><span class="line">	init();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>����init()��������һЩ��ʼ�����������Ĺ��������ǻ����������һ��������init������</p>
<p>����<strong>��init������������View��LayoutParams��ʹ���ܹ�ʵ�ֵײ����С�</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//�ײ� ���� ˮƽ����</span><br><span class="line">lp = new LayoutParams(iWidth, iHeight);</span><br><span class="line">lp.addRule(CENTER_HORIZONTAL, TRUE); //�����TRUE Ҫע�� ����true</span><br><span class="line">lp.addRule(ALIGN_PARENT_BOTTOM, TRUE);</span><br></pre></td></tr></table></figure>
<p>ע�⣺<br>�ؼ��Ŀ�ȸ߶�Ӧ��onMeasure�����л�ȡ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">	super.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">	// ��ȡ�ؼ���ߣ�Ӧ��onMeasure�����л�ȡ��</span><br><span class="line">	mWidth = getMeasuredWidth();</span><br><span class="line">	mHeight = getMeasuredHeight();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="������������ʵ�����"><a href="#������������ʵ�����" class="headerlink" title="������������ʵ�����"></a>������������ʵ�����</h3><p>���Զ����View�д��� ���� Drawable���������</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private Drawable aLove;</span><br><span class="line">private Drawable bLove;</span><br><span class="line">private Drawable cLove;</span><br><span class="line">private Drawable dLove;</span><br><span class="line">private Drawable eLove;</span><br><span class="line"></span><br><span class="line">private Drawable[] loves;</span><br></pre></td></tr></table></figure>
<p>��init�����У������Ĵ�������������</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//��ʼ����ʾ��ͼƬ</span><br><span class="line">loves = new Drawable[5];</span><br><span class="line">aLove = getResources().getDrawable(R.mipmap.love_a);</span><br><span class="line">bLove = getResources().getDrawable(R.mipmap.love_b);</span><br><span class="line">cLove = getResources().getDrawable(R.mipmap.love_c);</span><br><span class="line">dLove = getResources().getDrawable(R.mipmap.love_d);</span><br><span class="line">eLove = getResources().getDrawable(R.mipmap.love_e);</span><br><span class="line"></span><br><span class="line">//��ֵ��loves</span><br><span class="line">loves[0] = aLove;</span><br><span class="line">loves[1] = bLove;</span><br><span class="line">loves[2] = cLove;</span><br><span class="line">loves[3] = dLove;</span><br><span class="line">loves[4] = eLove;</span><br></pre></td></tr></table></figure>
<p>Ĭ���ṩ�����ֲ�ͬ��ɫ�İ��ģ���Ȼ������������п��������ⲿ���ã�������չ��</p>
<hr>
<h3 id="�������L���ʱ����һ�����U�����K���"><a href="#�������L���ʱ����һ�����U�����K���" class="headerlink" title="�������Ľ���ʱ����һ�����Ų�����Ķ���"></a>�������Ľ���ʱ����һ�����Ų�����Ķ���</h3><p> �ȿ�Ч����<br> <img src="http://img.blog.csdn.net/20171013171139379?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����"> </p>
<p>˵��Android������������ǰ����Animation����ͨ����������������ǵ����󣬵������Ĺ��ܱȽ����������Ǻܺ��á�����3.0��,ǿ������Զ����ĳ���,�ö�����Android��ʵ��������÷ǳ����ס�����㻹��֪�����Զ�����ôʹ�ã��Ͻ�ȥ�˽�һ�°ɣ�</p>
<p>�ϴ���</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ���ó�ʼ����</span><br><span class="line"> * ���� ���Һ�����Ŵ�</span><br><span class="line"> *</span><br><span class="line"> * @param target</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">private AnimatorSet getEnterAnimtor(final View target) &#123;</span><br><span class="line"></span><br><span class="line">	ObjectAnimator alpha = ObjectAnimator.ofFloat(target, View.ALPHA, 0.2f, 1f);</span><br><span class="line">	ObjectAnimator scaleX = ObjectAnimator.ofFloat(target, View.SCALE_X, 0.2f, 1f);</span><br><span class="line">	ObjectAnimator scaleY = ObjectAnimator.ofFloat(target, View.SCALE_Y, 0.2f, 1f);</span><br><span class="line">	AnimatorSet enter = new AnimatorSet();</span><br><span class="line">	enter.setDuration(500);</span><br><span class="line">	enter.setInterpolator(new LinearInterpolator());</span><br><span class="line">	enter.playTogether(alpha, scaleX, scaleY);</span><br><span class="line">	enter.setTarget(target);</span><br><span class="line">	return enter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>����������target�����ǰ��ĵ�ImageView���������Զ������������ͬʱ������Ŵ�</p>
<p><strong>�����ṩ���޵ķ�������ʵ�Ǵ�������ImageView����ӣ�</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ����</span><br><span class="line"> * ���Ⱪ¶�ķ���</span><br><span class="line"> */</span><br><span class="line">public void addFavor() &#123;</span><br><span class="line">    ImageView imageView = new ImageView(getContext());</span><br><span class="line">    // ���ѡһ��</span><br><span class="line">    imageView.setImageDrawable(loves[random.nextInt(loves.length)]);</span><br><span class="line">    // ���õײ� ˮƽ����</span><br><span class="line">    imageView.setLayoutParams(lp);</span><br><span class="line"></span><br><span class="line">    addView(imageView);</span><br><span class="line">    Log.e(TAG, &quot;addFavor: &quot; + &quot;add����view��:&quot; + getChildCount());</span><br><span class="line"></span><br><span class="line">    Animator set = getAnimator(imageView);</span><br><span class="line">    set.addListener(new AnimEndListener(imageView));</span><br><span class="line">    set.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>������ʵ���ǣ��ڰ��������������ȡһ������ImageView����Ӹ����ؼ������ý���ͷŴ󶯻���</p>
<p>��ô���������ڰ�ť�ĵ���¼��е���addFavor�����Ϳ���ʵ������ͼ�İ���Ч���ˡ�</p>
<hr>
<h3 id="�g�ʹ�n���������ʵ�������˶��켣"><a href="#�g�ʹ�n���������ʵ�������˶��켣" class="headerlink" title="�ġ�ʹ�ñ���������ʵ�������˶��켣"></a>�ġ�ʹ�ñ���������ʵ�������˶��켣</h3><p>������ô�ð��İ��������ƶ�?���һ��������?</p>
<p>���������Ǳ��ĵ����Ǳ��������ߵǳ���ʱ��������Ҳ����ʵ�����Ч��ѧ��������Ҫ��֪ʶ�����˽ⱴ�������ߵĿ����Ķ���д����һƪ����<a href="https://mp.weixin.qq.com/s?__biz=MzI3ODg5NTkwMA==&amp;tempkey=OTI2X2JWV0ZvbHFrcFpHR0J5VVhyV3B1cUNrVzJDODhZR0piVFhzUnd4ZzVYX0Z1YVAtNkhIbmw5VXc2bVpPUU5iNlhfTExVVEVfWnhFR1dqZllXQ2dVdTFVWXpaZ1prR2FWX0dTcnBQN2tRZ3ZCcFZlN0hXcUE3RWxYbU1vWGhBdEpDakhLRXQtaFBDZGRNLXg5cFltUzE5X0lCN2ZvaFRpMkFVNEhqc2d%2bfg==&amp;chksm=6b514de15c26c4f71d5178cefbe15a738b58d50a1d6243db47f5983ed88d8ba2ed4246278f0f#rd" target="_blank" rel="noopener">�����еĶ�Ч�����ʵ�� ���� ���������߶����Ĳ�ֵ��</a></p>
<p><strong>����˵�����Ǹ���һ����㣬һ���յ㣬һ����һ�����ϵĿ��Ƶ㣬�����һ������.</strong></p>
<p>���˽ⱴ�������ߺ󣬷��� <strong>���η�����������</strong> �������ǵ�Ҫ��</p>
<p>��ʽ:<br><img src="http://img.blog.csdn.net/20171013172604979?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����"></p>
<p>��ʽ����Ҫ�ĸ�P��P0�����ǵ���㣬P3���յ㣬P1��P2�����ߵ��������Ƶ㡣��t��һ�����ӣ�ȡֵ��Χ��0-1����Ϥ������ͬѧӦ�þ����ף�0-1���Զ����������ж�ô�ش�</p>
<p>��Ϊ��Ҫ�Լ�ʵ�ֱ������������뵽�����Զ����е�<strong>TypeEvaluator</strong>��������������Ҫ�ġ�</p>
<p>�ϴ��룺</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Description: ������ֵ������ʵ��ƽ������</span><br><span class="line"> * Created by jia on 2017/10/13.</span><br><span class="line"> * ��֮�����ܣ���������</span><br><span class="line"> */</span><br><span class="line">public class BezierEvaluator implements TypeEvaluator&lt;PointF&gt; &#123;</span><br><span class="line"></span><br><span class="line">    // �������Ƶ�</span><br><span class="line">    private PointF pointF1;</span><br><span class="line">    private PointF pointF2;</span><br><span class="line"></span><br><span class="line">    public BezierEvaluator(PointF pointF1,PointF pointF2)&#123;</span><br><span class="line">        this.pointF1 = pointF1;</span><br><span class="line">        this.pointF2 = pointF2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public PointF evaluate(float time, PointF startValue, PointF endValue) &#123;</span><br><span class="line">        float timeLeft = 1.0f - time;</span><br><span class="line"></span><br><span class="line">        //���</span><br><span class="line">        PointF point = new PointF();</span><br><span class="line"></span><br><span class="line">        PointF point0 = (PointF)startValue;//���</span><br><span class="line">        PointF point3 = (PointF)endValue;//�յ�</span><br><span class="line"></span><br><span class="line">        // ��������ʽ</span><br><span class="line">        point.x = timeLeft * timeLeft * timeLeft * (point0.x)</span><br><span class="line">                + 3 * timeLeft * timeLeft * time * (pointF1.x)</span><br><span class="line">                + 3 * timeLeft * time * time * (pointF2.x)</span><br><span class="line">                + time * time * time * (point3.x);</span><br><span class="line"></span><br><span class="line">        point.y = timeLeft * timeLeft * timeLeft * (point0.y)</span><br><span class="line">                + 3 * timeLeft * timeLeft * time * (pointF1.y)</span><br><span class="line">                + 3 * timeLeft * time * time * (pointF2.y)</span><br><span class="line">                + time * time * time * (point3.y);</span><br><span class="line"></span><br><span class="line">        return point;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>����ʶһ�������ࣺ</p>
<ul>
<li>TypeEvaluator���ڻ�ȡ��������ʱֻ��Ҫ������ʼ�ͽ���ֵϵͳ�ͻ��Զ����ֵ��ƽ������,���ƽ�����ɵ���ɾ��ǿ�TypeEvaluator�����</li>
<li>PointF�����࣬��Pointһ������������x��yֵ��float����</li>
</ul>
<p><strong>��������view���ƶ���Ҫ����x y ���Ծʹ���PointF ��Ϊ������</strong></p>
<p><strong>���ľ����ڶ����仯�����У�ʵʱ���ݱ��������׷��̼�����λ�ò����ء�</strong></p>
<p>����һ����ֻҪ���Ǵ�������PonitF���ܵõ�һ�������������ˡ�</p>
<p>������������FavorLayout�ж����ȡһ�������������ķ�����</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ��ȡһ��·�����������Ƶ�</span><br><span class="line"> * @param scale</span><br><span class="line"> */</span><br><span class="line">private PointF getPointF(int scale) &#123;</span><br><span class="line"></span><br><span class="line">    PointF pointF = new PointF();</span><br><span class="line">    //��ȥ100 ��Ϊ�˿��� x����Χ</span><br><span class="line">    pointF.x = random.nextInt((mWidth - 100));</span><br><span class="line">    //��Y���� Ϊ��ȷ���ڶ������Ƶ� �ڵ�һ����֮��,�Ұ�Y�ֳ�����������</span><br><span class="line">    pointF.y = random.nextInt((mHeight - 100)) / scale;</span><br><span class="line">    return pointF;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>���ݱ��������߷��̿�֪���������Ƶ����������������·���Ĺؼ���Ϊ��ʹ���ĵ��˶��켣��ͬ����������<strong>��������������Ƶ㣬�Ϳ���ʹ�����߹켣���</strong>��</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ��ȡ���������߶���</span><br><span class="line"> * @param target</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">private ValueAnimator getBezierValueAnimator(View target) &#123;</span><br><span class="line"></span><br><span class="line">    //��ʼ��һ��BezierEvaluator</span><br><span class="line">    BezierEvaluator evaluator = new BezierEvaluator(getPointF(2), getPointF(1));</span><br><span class="line"></span><br><span class="line">    // ���̶����յ����</span><br><span class="line">    ValueAnimator animator = ValueAnimator.ofObject(evaluator, new PointF((mWidth - iWidth) / 2, mHeight - iHeight), new PointF(random.nextInt(getWidth()), 0));</span><br><span class="line">    animator.addUpdateListener(new BezierListener(target));</span><br><span class="line">    animator.setTarget(target);</span><br><span class="line">    animator.setDuration(3000);</span><br><span class="line">    return animator;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>�������Ѿ����֣��Ҹ����߶���������һ������BezierListener</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Description: �����������������λ�ã�����ʵ�ֶ���</span><br><span class="line"> * Created by jia on 2017/10/13.</span><br><span class="line"> * ��֮�����ܣ���������</span><br><span class="line"> */</span><br><span class="line">public class BezierListener implements ValueAnimator.AnimatorUpdateListener &#123;</span><br><span class="line"></span><br><span class="line">    private View target;</span><br><span class="line"></span><br><span class="line">    public BezierListener(View target) &#123;</span><br><span class="line">        this.target = target;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void onAnimationUpdate(ValueAnimator animation) &#123;</span><br><span class="line">        //�����ȡ�����������߼�������ĵ�x yֵ ��ֵ��view ���������ð���������������</span><br><span class="line">        PointF pointF = (PointF) animation.getAnimatedValue();</span><br><span class="line">        target.setX(pointF.x);</span><br><span class="line">        target.setY(pointF.y);</span><br><span class="line">        // ����͵����,˳����һ��alpha����,����alpha����Ҳ�����</span><br><span class="line">        target.setAlpha(1-animation.getAnimatedFraction());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ֻ���ڻص���ʹ���˼����ֵ�������������������˶�</strong>������û��Ч��Ŷ��</p>
<p>������λ�ø���ʱ�����ĵ�ImageView����x��yֵ��ʹ�䰴����ı�����·���˶�������</p>
<p>����ͬʱ�������𽥱䵭������Ҳ�������˶�����������ʧ��Ч����</p>
<p>�޸�һ��addFavor����������������Ϊ ����������</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public void addFavor() &#123;</span><br><span class="line"></span><br><span class="line">       ImageView imageView = new ImageView(getContext());</span><br><span class="line">       //���ѡһ��</span><br><span class="line">       imageView.setImageDrawable(drawables[random.nextInt(3)]);</span><br><span class="line">       imageView.setLayoutParams(lp);</span><br><span class="line">       addView(imageView);</span><br><span class="line">       Log.v(TAG, &quot;add����view��:&quot;+getChildCount());</span><br><span class="line">       getBezierValueAnimator(imageView).start();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>����Ч����</p>
<p><img src="http://img.blog.csdn.net/20171013174108549?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamlhc2h1YWk5NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����"></p>
<hr>
<h3 id="�塢��β��Ч���ϳ�"><a href="#�塢��β��Ч���ϳ�" class="headerlink" title="�塢��β��Ч���ϳ�"></a>�塢��β��Ч���ϳ�</h3><h4 id="1��ʵ�ֱ���"><a href="#1��ʵ�ֱ���" class="headerlink" title="1��ʵ�ֱ���"></a><strong>1��ʵ�ֱ���</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Ϊ��ʵ�� ����Ч�� ��ѡ�˼��ֲ岹��</span><br><span class="line">private Interpolator line = new LinearInterpolator();//����</span><br><span class="line">private Interpolator acc = new AccelerateInterpolator();//����</span><br><span class="line">private Interpolator dce = new DecelerateInterpolator();//����</span><br><span class="line">private Interpolator accdec = new AccelerateDecelerateInterpolator();//�ȼ��ٺ����</span><br><span class="line"></span><br><span class="line">// ��init�г�ʼ��</span><br><span class="line">private Interpolator[] interpolators;</span><br></pre></td></tr></table></figure>
<p>��init�����У�</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// ��ʼ����ֵ��</span><br><span class="line">interpolators = new Interpolator[4];</span><br><span class="line">interpolators[0] = line;</span><br><span class="line">interpolators[1] = acc;</span><br><span class="line">interpolators[2] = dce;</span><br><span class="line">interpolators[3] = accdec;</span><br></pre></td></tr></table></figure>
<p>���ѡ�ò�ֵ����ʹ�ð����˶��б仯��</p>
<h4 id="2�������ϲ�"><a href="#2�������ϲ�" class="headerlink" title="2�������ϲ�"></a><strong>2�������ϲ�</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ���ö���</span><br><span class="line"> *</span><br><span class="line"> * @param target</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">private Animator getAnimator(View target) &#123;</span><br><span class="line">    AnimatorSet set = getEnterAnimtor(target);</span><br><span class="line"></span><br><span class="line">    ValueAnimator bezierValueAnimator = getBezierValueAnimator(target);</span><br><span class="line"></span><br><span class="line">    AnimatorSet finalSet = new AnimatorSet();</span><br><span class="line">    finalSet.playSequentially(set);</span><br><span class="line">    finalSet.playSequentially(set, bezierValueAnimator);</span><br><span class="line">    finalSet.setInterpolator(interpolators[random.nextInt(4)]);//ʵ���������</span><br><span class="line">    finalSet.setTarget(target);</span><br><span class="line">    return finalSet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3���޸j��޷���"><a href="#3���޸j��޷���" class="headerlink" title="3���޸ĵ��޷���"></a><strong>3���޸ĵ��޷���</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ����</span><br><span class="line"> * ���Ⱪ¶�ķ���</span><br><span class="line"> */</span><br><span class="line">public void addFavor() &#123;</span><br><span class="line">    ImageView imageView = new ImageView(getContext());</span><br><span class="line">    // ���ѡһ��</span><br><span class="line">    imageView.setImageDrawable(loves[random.nextInt(loves.length)]);</span><br><span class="line">    // ���õײ� ˮƽ����</span><br><span class="line">    imageView.setLayoutParams(lp);</span><br><span class="line"></span><br><span class="line">    addView(imageView);</span><br><span class="line">    Log.e(TAG, &quot;addFavor: &quot; + &quot;add����view��:&quot; + getChildCount());</span><br><span class="line"></span><br><span class="line">    Animator set = getAnimator(imageView);</span><br><span class="line">    set.addListener(new AnimEndListener(imageView));</span><br><span class="line">    set.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>�����Ļ������ֿ������ˣ��Ҹ������������˽�������������Ϊʲô�أ�</p>
<h4 id="4��������ʧ����"><a href="#4��������ʧ����" class="headerlink" title="4��������ʧ����"></a><strong>4��������ʧ����</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">private class AnimEndListener extends AnimatorListenerAdapter &#123;</span><br><span class="line">	private View target;</span><br><span class="line"></span><br><span class="line">	public AnimEndListener(View target) &#123;</span><br><span class="line">		this.target = target;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public void onAnimationEnd(Animator animation) &#123;</span><br><span class="line">		super.onAnimationEnd(animation);</span><br><span class="line">		//��Ϊ��ͣ��add ������view����ֻ������,������view����������remove��</span><br><span class="line">		removeView((target));</span><br><span class="line">		Log.v(TAG, &quot;removeView����view��:&quot; + getChildCount());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>����֮ǰ������ʵ�Ѿ�ʵ�ֵ���Ч������ÿ�ε�����ڴ����µİ��ĵ�ImageView������ӵ��������У�����<strong>������һ��������Ŀ����Ϊ���ڶ��������󣬰Ѱ����Ƴ�����Ȼ����viewֻ��������</strong></p>
<hr>
<h3 id="�����ܽ�"><a href="#�����ܽ�" class="headerlink" title="�����ܽ�"></a>�����ܽ�</h3><p>�ܽ�û���˵ʲô������ʱ��ִ٣�������bug����ĵط�����ҷ��ֿ��Ը����ң��кõĽ���Ҳ���Ը����ң�����һ�����Ŷ�������ϲ���ҵ����£�����ȥ<a href="https://github.com/shuaijia/LiveLike" target="_blank" rel="noopener">https://github.com/shuaijia/LiveLike</a>�����Ŷ��^_^</p>
<p>���䣺819418850@qq.com</p>
<h4 id="���ྫ�����ݣ����ע�ҵ�΢�Z��ںs���Android������"><a href="#���ྫ�����ݣ����ע�ҵ�΢�Z��ںs���Android������" class="headerlink" title="���ྫ�����ݣ����ע�ҵ�΢�Ź��ںš���Android������"></a><strong>���ྫ�����ݣ����ע�ҵ�΢�Ź��ںš���Android������</strong></h4><p><img src="https://user-gold-cdn.xitu.io/2018/1/2/160b4a67429c1092?w=344&amp;h=344&amp;f=jpeg&amp;s=8753" alt="����дͼƬ����"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://shuaijia.github.io/2018/01/03/使用三阶贝塞尔曲线实现直播中点赞效果/" data-id="cjbyp4d8a0001e8ujn9k7d8qc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/01/03/用三阶贝塞尔曲线实现直播中点赞效果/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2018/01/03/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/03/用三阶贝塞尔曲线实现直播中点赞效果/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/01/03/使用三阶贝塞尔曲线实现直播中点赞效果/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/01/03/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Jia Shuai<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>